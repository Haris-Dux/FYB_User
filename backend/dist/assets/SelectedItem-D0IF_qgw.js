import{u as X,b as Z,r as l,g as me,a as v,j as e,F as C,h as he,i as ge,k as y,l as pe,M as ue,n as je,o as fe,p as ve,q as d,B as D,s as we,v as J,w as be,x as K,y as Ne}from"./index-zWI-pVi5.js";import{S as ye}from"./slick-theme-YF3k--Fa.js";const Ce=({category:p})=>{var R;const t=X(),c=Z(),[_,u]=l.useState(4),m=l.useRef(null),F=1;l.useEffect(()=>{c(me({category:p,page:F}))},[c,p,F]);const j=v(n=>n.products.products),k=()=>{m.current&&m.current.slickNext()},x=()=>{m.current&&m.current.slickPrev()},w={infinite:!0,slidesToShow:_,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3,pauseOnHover:!0,arrows:!1};l.useEffect(()=>{const n=()=>{window.innerWidth>=1200?u(4):window.innerWidth>=1024?u(3):window.innerWidth>=768?u(2):u(1)};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]);const h=n=>{t(`/selectedItem/${n}`),window.scroll(0,0)},B=({rating:n})=>{const f=[];for(let g=0;g<n;g++)f.push(e.jsx(C,{className:"text-[#FFC209]"},g));return e.jsx("div",{className:"flex",children:f})};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mt-10 py-14 sm:py-16 px-5 sm:px-4 xl:px-0 bg-[#FFF3F9]",children:e.jsxs("div",{className:"max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"header px-0 sm:px-5 flex justify-between items-center flex-wrap gap-6",children:[e.jsxs("div",{className:"name",children:[e.jsx("h2",{className:"mb-2.5 playfair text-4xl sm:text-4xl font-bold",children:"Related Products"}),e.jsx("p",{className:"h-0.5 w-16 bg-[#EC72AF]"})]}),e.jsxs("div",{className:"slider_button hidden sm:flex flex-row",children:[e.jsx("button",{onClick:x,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left ",children:e.jsx("path",{d:"m15 18-6-6 6-6"})})}),e.jsx("button",{onClick:k,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right ",children:e.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]}),e.jsxs("div",{className:"data",children:[e.jsx("div",{className:"mt-8 sm:mt-12",children:e.jsx(ye,{ref:m,...w,children:j&&((R=j==null?void 0:j.productData)==null?void 0:R.map((n,f)=>e.jsx("div",{className:"mx-0 pb-7",children:e.jsxs("div",{onClick:()=>h(String(n.id)),className:"group mb-3 relative group w-60 mx-auto bg-white border border-gray-400 hover-border-2 hover:border-[#EC72AF] cursor-pointer",children:[e.jsx("img",{className:"object-cover w-full h-56",src:n.image.downloadURL,alt:"products"}),e.jsxs("div",{className:"py-5 text-center",children:[e.jsx("h3",{className:"playfair mb-2 text-lg font-semibold text-gray-800",children:n.name}),e.jsx("div",{className:"mb-2 flex items-center justify-center gap-1",children:(n==null?void 0:n.averageRating)===0?e.jsx(C,{className:"text-white"}):e.jsx(B,{rating:n==null?void 0:n.averageRating})}),e.jsxs("p",{className:"mb-3 text-md text-gray-500",children:["(",(n==null?void 0:n.category)==="Body Care"?"Bodycare":n==null?void 0:n.category,")"]}),e.jsxs("p",{className:"mb-3 text-xl font-semibold text-black",children:["Rs. ",n.price]}),e.jsx("button",{className:"hidden group-hover:block absolute w-28 sm:w-40 -bottom-5 left-0 right-0 text-sm mx-auto py-3 bg-[#EC72AF] text-white font-semibold",children:"Shop Now"})]})]})},f)))})}),e.jsxs("div",{className:"slider_button sm:hidden flex flex-row justify-center",children:[e.jsx("button",{onClick:x,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left ",children:e.jsx("path",{d:"m15 18-6-6 6-6"})})}),e.jsx("button",{onClick:k,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right ",children:e.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]})]})})})},Q=({rating:p})=>{const t=[];for(let c=0;c<p;c++)t.push(e.jsx(C,{className:"text-[#FFC209]"},c));return e.jsx("div",{className:"flex",children:t})},Re=()=>{var M,T,$,G,H,q,Y;const p=X(),t=Z(),[c,_]=l.useState(!1),u=()=>{_(!c)},[m,F]=l.useState(),[j,k]=l.useState(),{id:x}=he(),w=x;l.useEffect(()=>{t(ge(x))},[x]);const h=v(r=>r.products.singleProduct);console.log("allproducts",h);const B=v(r=>r.products.singleProductloading),[R,n]=l.useState(!1),f=r=>{k(r),n(!0)},g=()=>{n(!1)},[V,P]=l.useState(!1),I=r=>{F(r);const i=a.find(o=>o.id===r);i&&E({review:i.review,rating:i.rating}),P(!0)},A=()=>{P(!1),E({review:"",rating:1})},s=h,a=v(r=>r.reviews.allReviews),ee=v(r=>r.reviews.loading),se=a==null?void 0:a.filter(r=>r.id===m),re=a==null?void 0:a.filter(r=>r.id===j),L=v(r=>r.auth.user),U=(M=L==null?void 0:L.user)==null?void 0:M.id,[b,O]=l.useState({review:"",rating:1}),[N,E]=l.useState({review:"",rating:1});l.useEffect(()=>{t(y(x))},[]);const ne=r=>{O(i=>({...i,rating:r}))},[z,ie]=l.useState(),te=r=>{ie(r)},le=()=>{s&&(t(we(s)),p("/products"),J.success("Item Added to Cart"))},ae=()=>{const r=x;if(!b.review||b.rating===0){J.error("Please leave a review to rate the product");return}t(be({productID:r,userID:U,...b})).then(()=>{t(y(x))}),O({review:"",rating:1})},oe=(r,i)=>{const o=r;if(z!==i){const W=N;delete W.rating;const S={id:o,...N};S.rating=z,t(K(S)).then(()=>{t(y(w)),A()})}else t(K({id:o,...N})).then(()=>{t(y(w)),A()}),E({review:"",rating:1})},ce=r=>{t(Ne(r)).then(()=>{g(),t(y(w))})},xe=r=>{E({...N,review:r.target.value})},de=h==null?void 0:h.category;return e.jsx(e.Fragment,{children:B?e.jsx(pe,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 pb-10",children:e.jsxs("div",{className:"px-4 max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"mt-5 mb-4 sm:ml-7",children:["Home / Shop /"," ",e.jsx("span",{className:"text-[#EB72AF]",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"grid items-start grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsx("div",{className:"w-full overflow-hidden lg:sticky top-0 sm:flex gap-2",children:e.jsx("img",{className:"w-full sm:h-[28rem] pr-0 lg:pr-10 object-contain rounded-lg",src:(T=s==null?void 0:s.image)==null?void 0:T.downloadURL,alt:(s==null?void 0:s.category)!=="Bundle"?"Product":"Bundle"})}),e.jsxs("div",{className:"content_side",children:[(s==null?void 0:s.category)!=="Bundle"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"content",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-gray-800",children:s==null?void 0:s.name}),s&&e.jsxs("div",{className:"flex items-center mt-4",children:[s.averageRating===0?"No Ratings":e.jsx(Q,{rating:s.averageRating}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",s.averageRating,")"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["(",(s==null?void 0:s.category)==="Body Care"?"Bodycare":s==null?void 0:s.category,")"]}),e.jsxs("div",{className:"space-y-3 mt-4 pl-0 text-sm text-gray-800",children:[e.jsx("p",{className:c?"":"clamped-text",children:s==null?void 0:s.description}),e.jsx("span",{onClick:u,className:"pt-2 text-pink-500 cursor-pointer font-medium hover:underline hover:underline-offset-4",children:c?"Read less":"Read more"})]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:s&&s.price!==(s==null?void 0:s.sale_price)?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`${s!=null&&s.sale_price&&(s==null?void 0:s.sale_price)>0?"text-gray-800 text-lg line-through":"text-gray-800 text-xl font-bold"}`,children:["Rs. ",s==null?void 0:s.price]}),s!=null&&s.sale_price&&(s==null?void 0:s.sale_price)>0?e.jsxs("p",{className:"text-gray-800 text-2xl font-bold",children:["Rs. ",s==null?void 0:s.sale_price]}):""]}):e.jsxs("p",{className:"text-gray-800 text-2xl font-bold",children:["Rs. ",s==null?void 0:s.price]})})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4 pl-0 text-sm text-gray-800",children:[e.jsx("h2",{className:"mb-1 text-2xl sm:text-3xl font-semibold text-gray-800",children:($=s==null?void 0:s.bundleDescription)==null?void 0:$.main_heading}),e.jsx("p",{className:"mb-2 text-lg font-normal",children:(G=s==null?void 0:s.bundleDescription)==null?void 0:G.main_description}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 my-2.5",children:s&&s.price!==(s==null?void 0:s.sale_price)?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`${s!=null&&s.sale_price&&(s==null?void 0:s.sale_price)>0?"text-gray-800 text-lg line-through":"text-gray-800 text-xl font-bold"}`,children:["Rs. ",s==null?void 0:s.price]}),s!=null&&s.sale_price&&(s==null?void 0:s.sale_price)>0?e.jsxs("p",{className:"text-red-600 text-2xl font-bold",children:["Rs. ",s==null?void 0:s.sale_price]}):""]}):e.jsxs("p",{className:"text-gray-800 text-2xl font-bold",children:["Rs. ",s==null?void 0:s.price]})}),e.jsxs("h2",{className:"mb-1.5 text-2xl font-semibold",children:["What's Inside"," ",(H=s==null?void 0:s.bundleDescription)==null?void 0:H.main_heading]}),(q=s==null?void 0:s.bundleDescription)==null?void 0:q.product_details.map((r,i)=>{var o;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"text-xl font-semibold",children:[i+1," - ",r==null?void 0:r.name]}),e.jsx("p",{className:"text-lg font-normal",children:r==null?void 0:r.description}),e.jsx("ul",{className:"mb-2 text-lg font-normal pl-2",children:(o=r==null?void 0:r.key_benefits)==null?void 0:o.map((W,S)=>e.jsx(e.Fragment,{children:e.jsxs("li",{className:"flex justify-start items-center gap-x-2",children:[e.jsx(ue,{size:20,className:"text-[#EC72AF]"}),W]},S)}))}),e.jsxs("h2",{className:"text-lg font-medium",children:[e.jsx("span",{className:"font-semibold mr-2",children:"key Ingrediants:"}),e.jsx("span",{className:"text-lg font-normal",children:r==null?void 0:r.key_ingrediants})]})]},i)})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Why Choose?"}),e.jsx("ul",{children:(Y=s==null?void 0:s.bundleDescription)==null?void 0:Y.why_choose_us.map((r,i)=>e.jsx("li",{className:"text-lg font-normal",children:r},i))})]})}),s!=null&&s.stock&&(s==null?void 0:s.stock)>0?e.jsx("button",{onClick:le,className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-[#EC72AF] hover:bg-[#f181b9] text-white font-bold rounded",type:"button",children:"Add to cart"}):e.jsx("span",{className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-[#EC72AF] hover:bg-[#f181b9] text-white font-bold rounded",children:"Out Of Stock"})]})]})]}),e.jsx("div",{className:"mt-16 max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:e.jsx("div",{className:"mt-8",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8 reviews max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"mt-10 all_reviews",children:[e.jsx("div",{className:"mb-6 reviews_headers",children:a.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl text-gray-800 text-center font-semibold",children:"Weâ€™re feeling the love"}),e.jsxs("h2",{className:"mt-2 text-xl text-gray-600 text-center font-semibold",children:["Reviews"," ",e.jsxs("span",{className:"text-md",children:["(",a.length,")"]})]})]}):e.jsx("h2",{className:"text-2xl text-gray-800 text-center font-semibold",children:"No Reviews"})}),ee?e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(je,{type:"ball-beat",active:!0})}):e.jsx(e.Fragment,{children:a&&a.map((r,i)=>e.jsxs("div",{className:"mt-3 px-6 py-4 rounded-xl border border-gray-300 bg-[#FFF3F9] all_reviews",children:[e.jsxs("div",{className:"flex justify-between flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"left flex items-center gap-2",children:[e.jsx("h2",{children:r.name})," ",e.jsx("p",{className:"w-24",children:e.jsx(Q,{rating:r==null?void 0:r.rating})})]}),e.jsx("div",{className:"right",children:e.jsx("p",{children:new Date(r==null?void 0:r.createdAt).toLocaleDateString()})})]}),e.jsxs("div",{className:"mt-2 flex justify-between flex-wrap items-center gap-2",children:[e.jsx("p",{className:"my-1",children:r==null?void 0:r.review}),e.jsx("div",{className:"edit flex items-center  gap-3",children:U===r.userID?e.jsxs(e.Fragment,{children:[e.jsx(fe,{onClick:()=>I(r==null?void 0:r.id),className:"cursor-pointer",size:20}),e.jsx(ve,{onClick:()=>f(r==null?void 0:r.id),className:"cursor-pointer",size:20})]}):null})]})]},i))})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 ml-1 text-gray-700 font-medium",children:"Your Review *"}),e.jsx("textarea",{id:"OrderNotes",className:"w-full resize-y border border-gray-800 rounded-xl align-top focus:ring-0 focus:outline-none focus:border-pink-500 sm:text-sm p-4",rows:4,placeholder:"Write a comment...",value:b.review,onChange:r=>O(i=>({...i,review:r.target.value}))}),e.jsxs("div",{className:"mt-4 mb-2 flex items-center justify-start gap-1",children:[e.jsx("p",{className:"mr-1 text-gray-700 font-medium text-sm",children:"Give your rating:"}),[1,2,3,4,5].map(r=>e.jsx(C,{style:{color:r<=b.rating?"#FFC107":"#D1D5DB",cursor:"pointer"},onClick:()=>ne(r)},r))]}),e.jsx("button",{className:"mt-1 text-white py-2 px-4 rounded-md bg-[#EC72AF] hover:bg-[#f181b9]",onClick:ae,children:"Submit Review"})]})]})})})]})}),(s==null?void 0:s.category)!=="Bundle"?e.jsx(Ce,{category:de}):null,se.map((r,i)=>e.jsx(d,{isOpen:V,onClose:A,children:e.jsxs(d.Body,{className:"w-[40rem] space-y-3",children:[e.jsx("h2",{className:"py-2 text-2xl font-semibold text-gray-700",children:"Update Review"}),e.jsx(d.Content,{children:e.jsxs("div",{className:"!mb-6",children:[e.jsx("textarea",{id:"OrderNotes",className:"w-full resize-y border border-gray-800 rounded-xl align-top focus:ring-0 focus:outline-none focus:border-pink-500 sm:text-sm p-4",rows:4,placeholder:"Write a comment...",value:N.review,onChange:xe}),e.jsxs("div",{className:"mt-4 mb-2 flex items-center justify-start gap-1",children:[e.jsx("p",{className:"mr-1 text-gray-700 font-medium text-sm",children:"Give your rating:"}),[1,2,3,4,5].map(o=>e.jsx(C,{style:{color:o<=(z||r.rating)?"#FFC107":"#D1D5DB",cursor:"pointer"},onClick:()=>te(o)},o))]})]})}),e.jsxs(d.Footer,{children:[e.jsx(D,{onClick:A,size:"sm",variant:"outline",color:"secondary",children:"Cancel"}),e.jsx(D,{onClick:()=>oe(r==null?void 0:r.id,r.rating),size:"sm",className:"bg-[#EC72AF] hover:bg-[#f181b9]",children:"Update Review"})]})]})},i)),re.map((r,i)=>e.jsx(d,{isOpen:R,onClose:g,children:e.jsxs(d.Body,{className:"space-y-3",children:[e.jsx(d.Content,{children:e.jsxs("div",{className:"!mb-6",children:[e.jsx("h3",{className:"mb-2 text-body-1 font-medium text-metal-900",children:"Delete review"}),e.jsx("p",{className:"text-body-4 font-normal text-metal-600",children:"Are you sure? This is a permanent change."})]})}),e.jsxs(d.Footer,{children:[e.jsx(D,{onClick:g,size:"sm",variant:"outline",color:"secondary",children:"Cancel"}),e.jsx(D,{onClick:()=>ce(r==null?void 0:r.id),size:"sm",className:"bg-red-600 hover:bg-red-500",children:"Delete"})]})]})},i))]})})};export{Re as default};
