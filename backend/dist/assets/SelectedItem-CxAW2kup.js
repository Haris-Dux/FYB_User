import{u as $,b as q,r as l,g as le,a as C,j as e,F as k,f as oe,h as ae,i as y,k as ce,l as xe,m as de,M as m,B as S,n as me,o as T,p as he,q as G,s as ue}from"./index-DSXvbveB.js";import{S as pe}from"./slick-theme-B40GQufR.js";const ge=({category:u})=>{var w;const i=$(),a=q(),[D,p]=l.useState(4),h=l.useRef(null),F=1;l.useEffect(()=>{a(le({category:u,page:F}))},[a,u,F]);const g=C(r=>r.products.products),R=()=>{h.current&&h.current.slickNext()},c=()=>{h.current&&h.current.slickPrev()},j={infinite:!0,slidesToShow:D,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3,pauseOnHover:!0,arrows:!1};l.useEffect(()=>{const r=()=>{window.innerWidth>=1200?p(4):window.innerWidth>=1024?p(3):window.innerWidth>=768?p(2):p(1)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]);const v=r=>{i(`/selectedItem/${r}`),window.scroll(0,0)},L=({rating:r})=>{const x=[];for(let f=0;f<r;f++)x.push(e.jsx(k,{className:"text-[#FFC209]"},f));return e.jsx("div",{className:"flex",children:x})};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mt-10 py-14 sm:py-16 px-5 sm:px-4 xl:px-0 bg-[#FFF3F9]",children:e.jsxs("div",{className:"max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"header px-0 sm:px-5 flex justify-between items-center flex-wrap gap-6",children:[e.jsxs("div",{className:"name",children:[e.jsx("h2",{className:"mb-2.5 playfair text-4xl sm:text-4xl font-bold",children:"Related Products"}),e.jsx("p",{className:"h-0.5 w-16 bg-[#EC72AF]"})]}),e.jsxs("div",{className:"slider_button hidden sm:flex flex-row",children:[e.jsx("button",{onClick:c,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left ",children:e.jsx("path",{d:"m15 18-6-6 6-6"})})}),e.jsx("button",{onClick:R,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right ",children:e.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]}),e.jsxs("div",{className:"data",children:[e.jsx("div",{className:"mt-8 sm:mt-12",children:e.jsx(pe,{ref:h,...j,children:g&&((w=g==null?void 0:g.productData)==null?void 0:w.map((r,x)=>e.jsx("div",{onClick:()=>v(String(r.id)),className:"mx-0 pb-7",children:e.jsxs("div",{className:"group mb-3 relative group w-60 mx-auto bg-white border border-gray-400 hover-border-2 hover:border-[#EC72AF] cursor-pointer",children:[e.jsx("img",{className:"object-cover w-full h-56",src:r.image.downloadURL,alt:"products"}),e.jsxs("div",{className:"py-5 text-center",children:[e.jsx("h3",{className:"playfair mb-2 text-lg font-semibold text-gray-800",children:r.name}),e.jsx("div",{className:"mb-2 flex items-center justify-center gap-1",children:(r==null?void 0:r.averageRating)===0?e.jsx(k,{className:"text-white"}):e.jsx(L,{rating:r==null?void 0:r.averageRating})}),e.jsxs("p",{className:"mb-3 text-md text-gray-500",children:["(",r.category,")"]}),e.jsxs("p",{className:"mb-3 text-xl font-semibold text-black",children:["Rs. ",r.price]}),e.jsx("button",{className:"hidden group-hover:block absolute w-28 sm:w-40 -bottom-5 left-0 right-0 text-sm mx-auto py-3 bg-[#EC72AF] text-white font-semibold",children:"Shop Now"})]})]})},x)))})}),e.jsxs("div",{className:"slider_button sm:hidden flex flex-row justify-center",children:[e.jsx("button",{onClick:c,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left ",children:e.jsx("path",{d:"m15 18-6-6 6-6"})})}),e.jsx("button",{onClick:R,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right ",children:e.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]})]})})})},H=({rating:u})=>{const i=[];for(let a=0;a<u;a++)i.push(e.jsx(k,{className:"text-[#FFC209]"},a));return e.jsx("div",{className:"flex",children:i})},we=()=>{var W,P;const u=$(),i=q(),[a,D]=l.useState(!1),p=()=>{D(!a)},[h,F]=l.useState(),[g,R]=l.useState(),{id:c}=oe(),j=c;l.useEffect(()=>{i(ae(c))},[c]);const v=C(s=>s.products.singleProduct),[L,w]=l.useState(!1),r=s=>{R(s),w(!0)},x=()=>{w(!1)},[f,z]=l.useState(!1),Y=s=>{F(s);const n=o.find(d=>d.id===s);n&&E({review:n.review,rating:n.rating}),z(!0)},A=()=>{z(!1),E({review:"",rating:1})},t=v,o=C(s=>s.reviews.allReviews),J=C(s=>s.reviews.loading),K=o==null?void 0:o.filter(s=>s.id===h),Q=o==null?void 0:o.filter(s=>s.id===g),_=C(s=>s.auth.user),U=(W=_==null?void 0:_.user)==null?void 0:W.id,[b,B]=l.useState({review:"",rating:1}),[N,E]=l.useState({review:"",rating:1});l.useEffect(()=>{i(y(c))},[]);const X=s=>{B(n=>({...n,rating:s}))},[O,Z]=l.useState(),V=s=>{Z(s)},I=()=>{t&&(i(me(t)),u("/products"),T.success("Item Added to Cart"))},ee=()=>{const s=c;if(!b.review||b.rating===0){T.error("Please leave a review to rate the product");return}i(he({productID:s,userID:U,...b})).then(()=>{i(y(c))}),B({review:"",rating:1})},se=(s,n)=>{const d=s;if(O!==n){const ne=N;delete ne.rating;const M={id:d,...N};M.rating=O,i(G(M)).then(()=>{i(y(j)),A()})}else i(G({id:d,...N})).then(()=>{i(y(j)),A()}),E({review:"",rating:1})},te=s=>{i(ue(s)).then(()=>{x(),i(y(j))})},re=s=>{E({...N,review:s.target.value})},ie=v==null?void 0:v.category;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"px-4 max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"mt-5 mb-4",children:["Home / Shop /"," ",e.jsx("span",{className:"text-[#EB72AF]",children:t==null?void 0:t.name})]}),e.jsxs("div",{className:"grid items-start grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsx("div",{className:"w-full overflow-hidden lg:sticky top-0 sm:flex gap-2",children:e.jsx("img",{alt:"Product",className:"w-full sm:h-[28rem] pr-0 lg:pr-10 object-contain rounded-lg",src:(P=t==null?void 0:t.image)==null?void 0:P.downloadURL})}),e.jsxs("div",{className:"content_side",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-gray-800",children:t==null?void 0:t.name}),t&&e.jsxs("div",{className:"flex items-center mt-4",children:[t.averageRating===0?"No Ratings":e.jsx(H,{rating:t.averageRating}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",t.averageRating,")"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["(",t==null?void 0:t.category,")"]}),e.jsxs("div",{className:"space-y-3 mt-4 pl-0 text-sm text-gray-800",children:[e.jsx("p",{className:a?"":"clamped-text",children:t==null?void 0:t.description}),e.jsx("span",{onClick:p,className:"pt-2 text-pink-500 cursor-pointer font-medium hover:underline hover:underline-offset-4",children:a?"Read less":"Read more"})]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:t&&t.price!==(t==null?void 0:t.sale_price)?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`${t!=null&&t.sale_price&&(t==null?void 0:t.sale_price)>0?"text-gray-800 text-lg line-through":"text-gray-800 text-xl font-bold"}`,children:["Rs. ",t==null?void 0:t.price]}),t!=null&&t.sale_price&&(t==null?void 0:t.sale_price)>0?e.jsxs("p",{className:"text-gray-800 text-2xl font-bold",children:["Rs. ",t==null?void 0:t.sale_price]}):""]}):e.jsxs("p",{className:"text-gray-800 text-2xl font-bold",children:["Rs. ",t==null?void 0:t.price]})}),t!=null&&t.stock&&(t==null?void 0:t.stock)>0?e.jsx("button",{onClick:I,className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-[#EC72AF] hover:bg-[#f181b9] text-white font-bold rounded",type:"button",children:"Add to cart"}):e.jsx("span",{className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-[#EC72AF] hover:bg-[#f181b9] text-white font-bold rounded",children:"Out Of Stock"})]})]})]}),e.jsx("div",{className:"mt-16 max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:e.jsx("div",{className:"mt-8",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8 reviews max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"mt-10 all_reviews",children:[e.jsx("div",{className:"mb-6 reviews_headers",children:o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl text-gray-800 text-center font-semibold",children:"Weâ€™re feeling the love"}),e.jsxs("h2",{className:"mt-2 text-xl text-gray-600 text-center font-semibold",children:["Reviews"," ",e.jsxs("span",{className:"text-md",children:["(",o.length,")"]})]})]}):e.jsx("h2",{className:"text-2xl text-gray-800 text-center font-semibold",children:"No Reviews"})}),J?e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(ce,{type:"ball-beat",active:!0})}):e.jsx(e.Fragment,{children:o&&o.map((s,n)=>e.jsxs("div",{className:"mt-3 px-6 py-4 rounded-xl border border-gray-300 bg-[#FFF3F9] all_reviews",children:[e.jsxs("div",{className:"flex justify-between flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"left flex items-center gap-2",children:[e.jsx("h2",{children:s.name})," ",e.jsx("p",{className:"w-24",children:e.jsx(H,{rating:s==null?void 0:s.rating})})]}),e.jsx("div",{className:"right",children:e.jsx("p",{children:new Date(s==null?void 0:s.createdAt).toLocaleDateString()})})]}),e.jsxs("div",{className:"mt-2 flex justify-between flex-wrap items-center gap-2",children:[e.jsx("p",{className:"my-1",children:s==null?void 0:s.review}),e.jsx("div",{className:"edit flex items-center  gap-3",children:U===s.userID?e.jsxs(e.Fragment,{children:[e.jsx(xe,{onClick:()=>Y(s==null?void 0:s.id),className:"cursor-pointer",size:20}),e.jsx(de,{onClick:()=>r(s==null?void 0:s.id),className:"cursor-pointer",size:20})]}):null})]})]},n))})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 ml-1 text-gray-700 font-medium",children:"Your Review *"}),e.jsx("textarea",{id:"OrderNotes",className:"w-full resize-y border border-gray-800 rounded-xl align-top focus:ring-0 focus:outline-none focus:border-pink-500 sm:text-sm p-4",rows:4,placeholder:"Write a comment...",value:b.review,onChange:s=>B(n=>({...n,review:s.target.value}))}),e.jsxs("div",{className:"mt-4 mb-2 flex items-center justify-start gap-1",children:[e.jsx("p",{className:"mr-1 text-gray-700 font-medium text-sm",children:"Give your rating:"}),[1,2,3,4,5].map(s=>e.jsx(k,{style:{color:s<=b.rating?"#FFC107":"#D1D5DB",cursor:"pointer"},onClick:()=>X(s)},s))]}),e.jsx("button",{className:"mt-1 text-white py-2 px-4 rounded-md bg-[#EC72AF] hover:bg-[#f181b9]",onClick:ee,children:"Submit Review"})]})]})})})]})}),e.jsx(ge,{category:ie}),K.map((s,n)=>e.jsx(m,{isOpen:f,onClose:A,children:e.jsxs(m.Body,{className:"w-[40rem] space-y-3",children:[e.jsx("h2",{className:"py-2 text-2xl font-semibold text-gray-700",children:"Update Review"}),e.jsx(m.Content,{children:e.jsxs("div",{className:"!mb-6",children:[e.jsx("textarea",{id:"OrderNotes",className:"w-full resize-y border border-gray-800 rounded-xl align-top focus:ring-0 focus:outline-none focus:border-pink-500 sm:text-sm p-4",rows:4,placeholder:"Write a comment...",value:N.review,onChange:re}),e.jsxs("div",{className:"mt-4 mb-2 flex items-center justify-start gap-1",children:[e.jsx("p",{className:"mr-1 text-gray-700 font-medium text-sm",children:"Give your rating:"}),[1,2,3,4,5].map(d=>e.jsx(k,{style:{color:d<=(O||s.rating)?"#FFC107":"#D1D5DB",cursor:"pointer"},onClick:()=>V(d)},d))]})]})}),e.jsxs(m.Footer,{children:[e.jsx(S,{onClick:A,size:"sm",variant:"outline",color:"secondary",children:"Cancel"}),e.jsx(S,{onClick:()=>se(s==null?void 0:s.id,s.rating),size:"sm",className:"bg-[#EC72AF] hover:bg-[#f181b9]",children:"Update Review"})]})]})},n)),Q.map((s,n)=>e.jsx(m,{isOpen:L,onClose:x,children:e.jsxs(m.Body,{className:"space-y-3",children:[e.jsx(m.Content,{children:e.jsxs("div",{className:"!mb-6",children:[e.jsx("h3",{className:"mb-2 text-body-1 font-medium text-metal-900",children:"Delete review"}),e.jsx("p",{className:"text-body-4 font-normal text-metal-600",children:"Are you sure? This is a permanent change."})]})}),e.jsxs(m.Footer,{children:[e.jsx(S,{onClick:x,size:"sm",variant:"outline",color:"secondary",children:"Cancel"}),e.jsx(S,{onClick:()=>te(s==null?void 0:s.id),size:"sm",className:"bg-red-600 hover:bg-red-500",children:"Delete"})]})]})},n))]})};export{we as default};
