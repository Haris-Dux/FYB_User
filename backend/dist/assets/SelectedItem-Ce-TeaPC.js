import{u as $,b as G,r as l,g as re,a as y,j as e,F as C,f as ie,h as ne,i as N,k as le,l as oe,m as ae,M as h,B as S,n as ce,o as P,p as xe,q as T,s as de}from"./index-DOC7xlvi.js";import{S as me}from"./slick-theme-DHmxlcwl.js";const he=({category:g})=>{var R;const i=$(),c=G(),[E,v]=l.useState(4),u=l.useRef(null),a=1;l.useEffect(()=>{c(re({category:g,page:a}))},[c,g,a]);const x=y(r=>r.products.products),p=()=>{u.current&&u.current.slickNext()},k=()=>{u.current&&u.current.slickPrev()},F={infinite:!0,slidesToShow:E,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3,pauseOnHover:!0,arrows:!1};l.useEffect(()=>{const r=()=>{window.innerWidth>=1200?v(4):window.innerWidth>=1024?v(3):window.innerWidth>=768?v(2):v(1)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]);const D=r=>{i(`/selectedItem/${r}`),window.scroll(0,0)},w=({rating:r})=>{const j=[];for(let d=0;d<r;d++)j.push(e.jsx(C,{className:"text-[#FFC209]"},d));return e.jsx("div",{className:"flex",children:j})};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mt-10 py-14 sm:py-16 px-5 sm:px-4 xl:px-0 bg-[#FFF3F9]",children:e.jsxs("div",{className:"max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"header px-0 sm:px-5 flex justify-between items-center flex-wrap gap-6",children:[e.jsxs("div",{className:"name",children:[e.jsx("h2",{className:"mb-2.5 playfair text-4xl sm:text-4xl font-bold",children:"Related Products"}),e.jsx("p",{className:"h-0.5 w-16 bg-[#EC72AF]"})]}),e.jsxs("div",{className:"slider_button hidden sm:flex flex-row",children:[e.jsx("button",{onClick:k,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left ",children:e.jsx("path",{d:"m15 18-6-6 6-6"})})}),e.jsx("button",{onClick:p,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right ",children:e.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]}),e.jsxs("div",{className:"data",children:[e.jsx("div",{className:"mt-8 sm:mt-12",children:e.jsx(me,{ref:u,...F,children:x&&((R=x==null?void 0:x.productData)==null?void 0:R.map((r,j)=>e.jsx("div",{onClick:()=>D(String(r.id)),className:"mx-0 pb-7",children:e.jsxs("div",{className:"group mb-3 relative group w-60 mx-auto bg-white border border-gray-400 hover-border-2 hover:border-[#EC72AF] cursor-pointer",children:[e.jsx("img",{className:"object-cover w-full h-56",src:r.image.downloadURL,alt:"products"}),e.jsxs("div",{className:"py-5 text-center",children:[e.jsx("h3",{className:"playfair mb-2 text-lg font-semibold text-gray-800",children:r.name}),e.jsx("div",{className:"mb-2 flex items-center justify-center gap-1",children:(r==null?void 0:r.averageRating)===0?e.jsx(C,{className:"text-white"}):e.jsx(w,{rating:r==null?void 0:r.averageRating})}),e.jsxs("p",{className:"mb-3 text-md text-gray-500",children:["(",r.category,")"]}),e.jsxs("p",{className:"mb-3 text-xl font-semibold text-black",children:["$",r.price]}),e.jsx("button",{className:"hidden group-hover:block absolute w-28 sm:w-40 -bottom-5 left-0 right-0 text-sm mx-auto py-3 bg-[#EC72AF] text-white font-semibold",children:"Shop Now"})]})]})},j)))})}),e.jsxs("div",{className:"slider_button sm:hidden flex flex-row justify-center",children:[e.jsx("button",{onClick:k,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left ",children:e.jsx("path",{d:"m15 18-6-6 6-6"})})}),e.jsx("button",{onClick:p,className:"mx-1.5 inline-block rounded-full border text-[#EC72AF] hover:text-white border-[#EC72AF] hover:bg-[#EC72AF] p-2.5 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right ",children:e.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]})]})})})},M=({rating:g})=>{const i=[];for(let c=0;c<g;c++)i.push(e.jsx(C,{className:"text-[#FFC209]"},c));return e.jsx("div",{className:"flex",children:i})},ge=()=>{var z,U;const g=$(),i=G(),[c,E]=l.useState(),[v,u]=l.useState(),{id:a}=ie(),x=a;l.useEffect(()=>{i(ne(a))},[a]);const p=y(s=>s.products.singleProduct),[k,F]=l.useState(!1),D=s=>{u(s),F(!0)},w=()=>{F(!1)},[R,r]=l.useState(!1),j=s=>{E(s);const n=o.find(m=>m.id===s);n&&A({review:n.review,rating:n.rating}),r(!0)},d=()=>{r(!1),A({review:"",rating:1})},t=p,o=y(s=>s.reviews.allReviews),H=y(s=>s.reviews.loading),q=o==null?void 0:o.filter(s=>s.id===c),Y=o==null?void 0:o.filter(s=>s.id===v),L=y(s=>s.auth.user),O=(z=L==null?void 0:L.user)==null?void 0:z.id,[f,_]=l.useState({review:"",rating:1}),[b,A]=l.useState({review:"",rating:1});l.useEffect(()=>{i(N(a))},[]);const J=s=>{_(n=>({...n,rating:s}))},[B,K]=l.useState(),Q=s=>{K(s)},X=()=>{t&&(i(ce(t)),g("/products"),P.success("Item Added to Cart"))},Z=()=>{const s=a;if(!f.review||f.rating===0){P.error("Please leave a review to rate the product");return}i(xe({productID:s,userID:O,...f})).then(()=>{i(N(a))}),_({review:"",rating:1})},V=(s,n)=>{const m=s;if(B!==n){const te=b;delete te.rating;const W={id:m,...b};W.rating=B,i(T(W)).then(()=>{i(N(x)),d()})}else i(T({id:m,...b})).then(()=>{i(N(x)),d()}),A({review:"",rating:1})},I=s=>{i(de(s)).then(()=>{w(),i(N(x))})},ee=s=>{A({...b,review:s.target.value})},se=p==null?void 0:p.category;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"px-4 max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"mt-5 mb-4",children:["Home / Shop /"," ",e.jsx("span",{className:"text-[#EB72AF]",children:t==null?void 0:t.name})]}),e.jsxs("div",{className:"grid items-start grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsx("div",{className:"w-full overflow-hidden lg:sticky top-0 sm:flex gap-2",children:e.jsx("img",{alt:"Product",className:"w-full sm:h-[23rem] pr-0 lg:pr-10 object-contain rounded-lg",src:(U=t==null?void 0:t.image)==null?void 0:U.downloadURL})}),e.jsxs("div",{className:"content_side",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-800",children:t==null?void 0:t.name}),t&&e.jsxs("div",{className:"flex items-center mt-4",children:[t.averageRating===0?"No Ratings":e.jsx(M,{rating:t.averageRating}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",t.averageRating,")"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"(Skincare)"}),e.jsx("div",{className:"space-y-3 mt-4 pl-0 text-sm text-gray-800",children:e.jsx("p",{children:t==null?void 0:t.description})})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:t&&t.price!==(t==null?void 0:t.sale_price)?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`${t!=null&&t.sale_price&&(t==null?void 0:t.sale_price)>0?"text-gray-500 text-lg line-through":"text-gray-500 text-lg"}`,children:["Rs. ",t==null?void 0:t.price]}),t!=null&&t.sale_price&&(t==null?void 0:t.sale_price)>0?e.jsxs("p",{className:"text-gray-800 text-2xl font-bold",children:["Rs. ",t==null?void 0:t.sale_price]}):""]}):e.jsxs("p",{className:"text-gray-800 text-2xl font-bold",children:["Rs. ",t==null?void 0:t.price]})}),t!=null&&t.stock&&(t==null?void 0:t.stock)>0?e.jsx("button",{onClick:X,className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-[#EC72AF] hover:bg-[#f181b9] text-white font-bold rounded",type:"button",children:"Add to cart"}):e.jsx("span",{className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-[#EC72AF] hover:bg-[#f181b9] text-white font-bold rounded",children:"Out Of Stock"})]})]})]}),e.jsx("div",{className:"mt-16 max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:e.jsx("div",{className:"mt-8",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8 reviews max-w-5xl xl:max-w-6xl xxl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"mt-10 all_reviews",children:[e.jsx("div",{className:"mb-6 reviews_headers",children:o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl text-gray-800 text-center font-semibold",children:"Weâ€™re feeling the love"}),e.jsxs("h2",{className:"mt-2 text-xl text-gray-600 text-center font-semibold",children:["Reviews"," ",e.jsxs("span",{className:"text-md",children:["(",o.length,")"]})]})]}):e.jsx("h2",{className:"text-2xl text-gray-800 text-center font-semibold",children:"No Reviews"})}),H?e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(le,{type:"ball-beat",active:!0})}):e.jsx(e.Fragment,{children:o&&o.map((s,n)=>e.jsxs("div",{className:"mt-3 px-6 py-4 rounded-xl border border-gray-300 bg-[#FFF3F9] all_reviews",children:[e.jsxs("div",{className:"flex justify-between flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"left flex items-center gap-2",children:[e.jsx("h2",{children:s.name})," ",e.jsx("p",{className:"w-24",children:e.jsx(M,{rating:s==null?void 0:s.rating})})]}),e.jsx("div",{className:"right",children:e.jsx("p",{children:new Date(s==null?void 0:s.createdAt).toLocaleDateString()})})]}),e.jsxs("div",{className:"mt-2 flex justify-between flex-wrap items-center gap-2",children:[e.jsx("p",{className:"my-1",children:s==null?void 0:s.review}),e.jsx("div",{className:"edit flex items-center  gap-3",children:O===s.userID?e.jsxs(e.Fragment,{children:[e.jsx(oe,{onClick:()=>j(s==null?void 0:s.id),className:"cursor-pointer",size:20}),e.jsx(ae,{onClick:()=>D(s==null?void 0:s.id),className:"cursor-pointer",size:20})]}):null})]})]},n))})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 ml-1 text-gray-700 font-medium",children:"Your Review *"}),e.jsx("textarea",{id:"OrderNotes",className:"w-full resize-y border border-gray-800 rounded-xl align-top focus:ring-0 focus:outline-none focus:border-pink-500 sm:text-sm p-4",rows:4,placeholder:"Write a comment...",value:f.review,onChange:s=>_(n=>({...n,review:s.target.value}))}),e.jsxs("div",{className:"mt-4 mb-2 flex items-center justify-start gap-1",children:[e.jsx("p",{className:"mr-1 text-gray-700 font-medium text-sm",children:"Give your rating:"}),[1,2,3,4,5].map(s=>e.jsx(C,{style:{color:s<=f.rating?"#FFC107":"#D1D5DB",cursor:"pointer"},onClick:()=>J(s)},s))]}),e.jsx("button",{className:"mt-1 text-white py-2 px-4 rounded-md bg-[#EC72AF] hover:bg-[#f181b9]",onClick:Z,children:"Submit Review"})]})]})})})]})}),e.jsx(he,{category:se}),q.map((s,n)=>e.jsx(h,{isOpen:R,onClose:d,children:e.jsxs(h.Body,{className:"w-[40rem] space-y-3",children:[e.jsx("h2",{className:"py-2 text-2xl font-semibold text-gray-700",children:"Update Review"}),e.jsx(h.Content,{children:e.jsxs("div",{className:"!mb-6",children:[e.jsx("textarea",{id:"OrderNotes",className:"w-full resize-y border border-gray-800 rounded-xl align-top focus:ring-0 focus:outline-none focus:border-pink-500 sm:text-sm p-4",rows:4,placeholder:"Write a comment...",value:b.review,onChange:ee}),e.jsxs("div",{className:"mt-4 mb-2 flex items-center justify-start gap-1",children:[e.jsx("p",{className:"mr-1 text-gray-700 font-medium text-sm",children:"Give your rating:"}),[1,2,3,4,5].map(m=>e.jsx(C,{style:{color:m<=(B||s.rating)?"#FFC107":"#D1D5DB",cursor:"pointer"},onClick:()=>Q(m)},m))]})]})}),e.jsxs(h.Footer,{children:[e.jsx(S,{onClick:d,size:"sm",variant:"outline",color:"secondary",children:"Cancel"}),e.jsx(S,{onClick:()=>V(s==null?void 0:s.id,s.rating),size:"sm",className:"bg-[#EC72AF] hover:bg-[#f181b9]",children:"Update Review"})]})]})},n)),Y.map((s,n)=>e.jsx(h,{isOpen:k,onClose:w,children:e.jsxs(h.Body,{className:"space-y-3",children:[e.jsx(h.Content,{children:e.jsxs("div",{className:"!mb-6",children:[e.jsx("h3",{className:"mb-2 text-body-1 font-medium text-metal-900",children:"Delete review"}),e.jsx("p",{className:"text-body-4 font-normal text-metal-600",children:"Are you sure? This is a permanent change."})]})}),e.jsxs(h.Footer,{children:[e.jsx(S,{onClick:w,size:"sm",variant:"outline",color:"secondary",children:"Cancel"}),e.jsx(S,{onClick:()=>I(s==null?void 0:s.id),size:"sm",className:"bg-red-600 hover:bg-red-500",children:"Delete"})]})]})},n))]})};export{ge as default};
