import{b as C,u as A,a as x,r as t,e as g,j as e,H as E,l as B,M as c,n as I,B as N,G as P}from"./index-XqDpYlnV.js";const L=()=>{var f;const n=C(),h=A(),i=x(s=>s.auth.user),m=(f=i==null?void 0:i.user)==null?void 0:f.id,[b,j]=t.useState(!1),[v,y]=t.useState(),w=s=>{j(!0),y(s)},d=()=>{j(!1)};t.useEffect(()=>{i||h("/login")},[h,i]);const r=x(s=>s.orders.allOrders),u=x(s=>s.orders.loading),F=x(s=>s.orders.updateLoading),a=r.find(s=>(s==null?void 0:s.id)===v);t.useEffect(()=>{m&&n(g(m))},[m,n]);const p=s=>{n(P({id:s,orderProgress:"Cancelled"})).then(l=>{const O=m;l.payload.message==="Order Data Updated"&&(n(g(O)),d()),window.scroll({behavior:"smooth",top:0})})},D=s=>{switch(s){case"Pending":return"text-yellow-500";case"Delivered":return"text-green-500";case"Dispatched":return"text-blue-500";case"Cancelled":return"text-red-500";default:return"text-gray-700"}};return e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Orders - For Your Beauty"})]}),u?e.jsx("div",{className:"flex justify-center items-center min-h-screen ",children:e.jsx(B,{})}):e.jsx("section",{className:"w-full  py-14 sm:py-12 px-5 sm:px-8 lg:px-10 xl:px-0 min-h-[90vh]",children:e.jsx("div",{className:"max-w-5xl xl:max-w-6xl mx-auto",children:(r==null?void 0:r.length)===0?e.jsx(e.Fragment,{children:e.jsx("span",{className:"playfair text-3xl font-semibold uppercase",children:"No Orders"})}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"playfair text-3xl font-bold",children:"Order Details"}),e.jsx("div",{className:"mt-3 text-sm",children:"Check the status of recent and old orders"}),r.map(s=>{var o;return e.jsxs("div",{className:"mt-8 flex flex-col overflow-hidden rounded-xl border border-[#EB72AF] md:flex-row",children:[e.jsx("div",{className:"w-full border-r border-gray-300 bg-[#FFF3F9] md:max-w-xs",children:e.jsxs("div",{className:"parent py-6 px-6 flex flex-col justify-between h-full gap-y-10",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-2",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-md sm:text-md font-semibold",children:"Order ID"}),e.jsx("div",{className:"text-md font-medium text-gray-700",children:s==null?void 0:s.OrderID})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-md sm:text-md font-semibold",children:"Date"}),e.jsx("div",{className:"text-md font-medium text-gray-700",children:new Date(s==null?void 0:s.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-md sm:text-md font-semibold",children:"Total Amount"}),e.jsxs("div",{className:"text-md font-medium text-gray-700",children:["Rs. ",s==null?void 0:s.totalAmount]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-md sm:text-md font-semibold",children:"Order Status"}),e.jsx("div",{className:`text-md font-medium ${D(s==null?void 0:s.orderProgress)}`,children:s==null?void 0:s.orderProgress})]})]}),e.jsx("div",{className:"button",children:(s==null?void 0:s.orderProgress)&&(s==null?void 0:s.orderProgress)==="Pending"&&e.jsx("div",{children:e.jsx("button",{onClick:()=>w(s==null?void 0:s.id),className:"mt-5 flex items-center gap-2 bg-[#EB72AF] text-white px-4 py-2 rounded-lg",children:e.jsx("span",{children:"Cancel Order"})})})})]})}),e.jsx("div",{className:"flex-1 bg-white",children:e.jsx("div",{className:"py-6 px-3 sm:px-6",children:e.jsx("ul",{className:"gap-4 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2",children:s&&((o=s==null?void 0:s.items)==null?void 0:o.map(l=>e.jsxs("li",{className:"flex px-3 flex-col justify-between space-x-5 py-7 md:flex-row border rounded-xl bg-[#FFF3F9]",children:[e.jsxs("div",{className:"flex flex-1 items-stretch",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{className:"h-20 w-20 rounded-lg bg-white border border-gray-200 object-contain",src:l==null?void 0:l.image.downloadURL,alt:"order_img"})}),e.jsxs("div",{className:"ml-5 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:l==null?void 0:l.name}),e.jsx("p",{className:"mt-1.5 text-sm font-medium text-gray-500",children:l==null?void 0:l.category})]}),e.jsxs("p",{className:"mt-4 text-sm font-medium text-gray-500",children:["x ",l==null?void 0:l.quantity]})]})]}),e.jsx("div",{className:"ml-auto flex flex-col items-end justify-between",children:e.jsx("p",{className:"text-right text-sm font-bold text-gray-900",children:(l==null?void 0:l.sale_price)!==0||(l==null?void 0:l.sale_price)>0?e.jsx(e.Fragment,{children:e.jsxs("p",{className:"",children:["Rs. ",l==null?void 0:l.sale_price]})}):e.jsxs("p",{className:"",children:["Rs. ",l==null?void 0:l.price]})})})]},l==null?void 0:l.id)))})})})]},s==null?void 0:s.OrderID)})]})})}),e.jsx(c,{isOpen:b,onClose:d,children:e.jsxs(c.Body,{className:"space-y-3",children:[e.jsx(c.Content,{children:e.jsx("div",{className:"!mb-6",children:e.jsx("h3",{className:"mt-3 mb-2 text-body-1 font-medium text-metal-900",children:"Confirm order cancellation?"})})}),e.jsx(c.Footer,{children:F?e.jsx("div",{className:"flex justify-center items-center w-full",children:e.jsx(I,{type:"ball-beat",active:!0})}):e.jsxs(e.Fragment,{children:[" ",e.jsx(N,{onClick:d,size:"sm",variant:"outline",color:"secondary",children:"Cancel"}),e.jsx(N,{onClick:()=>p(a==null?void 0:a.id),className:"bg-[#EB72AF] hover:bg-[#EB72AF]",size:"sm",children:"Confirm"})]})})]})})]})};export{L as default};
